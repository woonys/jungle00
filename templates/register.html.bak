<!DOCTYPE html>
<html lang="ko">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
        crossorigin="anonymous">
    <link rel="stylesheet" href="../static/login.css">
    <link href="https://fonts.googleapis.com/earlyaccess/notosanskr.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css"/>  
    <!-- JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
        integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
        crossorigin="anonymous"></script>


    <title>íšŒì›ê°€ì… í˜ì´ì§€</title>
    <style>
        .mytitle {
            color: white;
            width: 300px;
            height: 200px;
            background-image: url('https://www.ancient-origins.net/sites/default/files/field/image/Agesilaus-II-cover.jpg');
            background-position: center;
            background-size: cover;

            border-radius: 10px;
            text-align: center;
            padding-top: 40px;
        }

        .wrap {
            margin: 10px auto;
            width: 300px;
        }
    </style>

    <script>
        function click_register() {
            // ê°€ì…í•˜ê¸° ë²„íŠ¼ í´ë¦­ì‹œ ì…ë ¥ì°½ì— ìˆëŠ” ì •ë³´ë¥¼ ë°±ì—”ë“œë¡œ ë³´ë‚´ì¤€ë‹¤.
            let user_id = $('#user_id').val();
            let user_pwd = $('#user_pwd').val();
            let user_repwd = $('#user_repwd').val();
            let user_name = $('#user_name').val();
            let user_email = $('#user_email').val();
            
            $.ajax({
                    type: "POST", // POST ë°©ì‹ìœ¼ë¡œ ìš”ì²­í•˜ê² ë‹¤.
                    url: "/register", // /api/login_infoë¼ëŠ” urlì— ìš”ì²­í•˜ê² ë‹¤.
                    data: {id_give: user_id, pwd_give: user_pwd, repwd_give: user_repwd, name_give: user_name , email_give: user_email}, // ë°ì´í„°ë¥¼ ì£¼ëŠ” ë°©ë²•
                    success: function(response){ // ì„±ê³µí•˜ë©´
                    if (response["result"] == "success") {
                        alert(response["msg"]);
                    } else if (response["result"] == "input_fail") {
                        alert(response["msg"])
                    } else {
                        alert(response["msg"])
                    }
                    }
            })
        }

        function check_id() {
            let email = $('#user_email').val();
            if (email == '') {
                alert('ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”!');
            } else {
                if (email.includes('@')) {
                    // 3. info.spartacoding@gmail.com -> gmail ë§Œ ì¶”ì¶œí•´ì„œ
                    // 4. alert(ë„ë©”ì¸ ê°’);ìœ¼ë¡œ ë„ìš°ê¸°
                    // let domainWithDot = email.split('@')[1];
                    // let onlyDomain = domainWithDot.split('.')[0];
                    // alert(onlyDomain);
                } else {
                    // 5. ë§Œì•½ ì´ë©”ì¼ì´ ì•„ë‹ˆë©´ 'ì´ë©”ì¼ì´ ì•„ë‹™ë‹ˆë‹¤.' ë¼ëŠ” ì–¼ëŸ¿ ë„ìš°ê¸°
                    alert('ì´ë©”ì¼ì´ ì•„ë‹™ë‹ˆë‹¤.');
                    $('#user_email').val("");
                }
            }}

        function check_pwd() {
            let pwd = $('#user_pwd').val();
            let repwd = $('#user_repwd').val();
            if (pwd != repwd) {
                alert('ë¹„ë°€ë²ˆí˜¸ê°€ ë‹¤ë¦…ë‹ˆë‹¤.');
                $('#user_repwd').val("");
            }
        }
    </script>
</head>
<body >
    <section class="hero is-warning">
        <div class="hero-body">
                <h1 class="title" style="text-align: center;">
                    íšŒì› ê°€ì…ğŸ˜†
                </h1>
        </div>
    </section>
  <div class="login-form">
    <div>
      <input id= "user_id" type="text" name="id" class="text-field" placeholder="ì•„ì´ë””">
      <input id= "user_pwd" type="password" name="password" class="text-field" placeholder="ë¹„ë°€ë²ˆí˜¸">
      <input id= "user_repwd" type="password" name="re_password" class="text-field" ã…‡ placeholder="ë¹„ë°€ë²ˆí˜¸ ì¬ì…ë ¥">
      <input id= "user_name" type="text" name="name" class="text-field" placeholder="ì„±í•¨">
      <input id= "user_email" type="text" name="email" class="text-field" onchange= "check_id()" placeholder="ì´ë©”ì¼">
      <button type="submit" class="submit-btn" onclick="click_register(); location.href='/login';">ê°€ì…í•˜ê¸°</button>
    </div>
</body>
</html>